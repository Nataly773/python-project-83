{% extends 'layout.html' %}
{% block content %}
<div class="container mt-4">

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <h1>Сайты</h1>
  <table class="table" data-test="urls">
    <thead>
      <tr>
        <th>ID</th>
        <th>Имя</th>
        <th>Дата создания</th>
        <th>Код ответа</th> 
        <th>Последняя проверка</th>
      </tr>
    </thead>
    <tbody>
      {% for id, name, created_at, last_check, status_code in urls %}
        <tr>
          <td>{{ id }}</td>
          <td><a href="{{ url_for('show_url', id=id) }}">{{ name }}</a></td>
          <td>{{ created_at.strftime('%Y-%m-%d %H:%M') }}</td>
          <td>{{ status_code if status_code else '' }}</td> 
          <td>{{ last_check.strftime('%Y-%m-%d %H:%M') if last_check else '' }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}